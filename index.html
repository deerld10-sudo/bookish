@@ -9,10 +9,11 @@
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --tg-bg: var(--tg-theme-bg-color, #1a1a1c);
            --tg-sec-bg: var(--tg-theme-secondary-bg-color, #2c2c2e);
            --tg-text: var(--tg-theme-text-color, #ffffff);
            --tg-hint: var(--tg-theme-hint-color, #8e8e93);
            /* Установлен фиксированный темный фон приложения */
            --tg-bg: #1A1A1C;
            --tg-sec-bg: #2c2c2e;
            --tg-text: #ffffff;
            --tg-hint: #8e8e93;
            --tg-accent: #85BC41; 

            /* Цвета шильдиков с 60% прозрачности */
@@ -73,9 +74,22 @@
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none !important; }

        /* Полка */
        .book-shelf { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; max-width: 1200px; margin: 0 auto; }
        @media (min-width: 600px) { .book-shelf { grid-template-columns: repeat(4, 1fr); gap: 25px; } }
        /* Адаптивная полка */
        .book-shelf { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 20px; 
            max-width: 1400px; 
            margin: 0 auto; 
        }
        @media (min-width: 600px) { 
            .book-shelf { grid-template-columns: repeat(4, 1fr); gap: 25px; } 
        }
        @media (min-width: 1024px) { 
            .book-shelf { grid-template-columns: repeat(6, 1fr); gap: 25px; } 
        }

        .book-card { position: relative; cursor: pointer; transition: 0.2s; }
        .book-card:active { transform: scale(0.98); }
@@ -201,7 +215,7 @@
        .rating-slider { width: 100%; -webkit-appearance: none; height: 4px; background: var(--tg-sec-bg); border-radius: 2px; }
        .rating-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; background: var(--tg-accent); border-radius: 50%; cursor: pointer; }

        /* Унифицированный стиль всех кнопок в приложении */
        /* Унифицированный стиль всех кнопок */
        .btn-base {
            padding: 10px 6px; 
            border-radius: 8px; 
@@ -253,12 +267,10 @@
        .view-rating-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 14px; }
        .view-rating-item span:first-child { color: var(--tg-hint); }

        /* --- МОБИЛЬНАЯ ВЕРСИЯ (АДАПТИВ) --- */
        /* Мобильная версия */
        @media (max-width: 600px) {
            .view-header-flex { flex-direction: column; align-items: center; text-align: center; }
            .view-book-side { flex-direction: column; align-items: center; }
            
            /* Кнопки иконками под обложкой */
            .view-actions-side { 
                flex-direction: row; 
                width: 100%; 
@@ -269,14 +281,19 @@
            .view-actions-side .btn-mini-action { width: 48px; height: 48px; border-radius: 50%; }
            .view-actions-side .btn-mini-action span { display: none; }
            .view-actions-side .btn-mini-action svg { width: 22px; height: 22px; }
            /* Кнопка "Свой вопрос" на весь экран */
            #add-custom-q-btn { width: 100%; border-radius: 8px; margin-bottom: 10px; }
        }

        /* PDF Styles */
        .pdf-export-mode { background-color: #ffffff !important; color: #000000 !important; }
        .pdf-export-mode .view-note { background-color: #ffffff !important; padding: 40px !important; }
        .pdf-export-mode h1, .pdf-export-mode h2, .pdf-export-mode .a { color: #000000 !important; }
        .pdf-export-mode .rating-badge {
            color: #000000 !important;
            border: 1px solid rgba(0,0,0,0.2) !important;
            background-color: rgba(0,0,0,0.05) !important;
            box-shadow: none !important;
        }
    </style>
</head>
<body>
